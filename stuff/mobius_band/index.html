<!DOCTYPE html>
<html lang="en-us"
  dir="ltr">

<head>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">








    






<link rel="icon" type="image/ico" href="https://george.chemmala.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://george.chemmala.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://george.chemmala.com/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="192x192" href="https://george.chemmala.com/android-chrome-192x192.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://george.chemmala.com/apple-touch-icon.png">

<meta name="description" content="A simple python script to warp an image into a Mobius loop"/>


<meta name="fediverse:creator" content="@geoc@mathstodon.xyz">


<title>
    
    Warping a Image into a Mobius Loop | George Chemmala
    
</title>

<link rel="canonical" href="https://george.chemmala.com/stuff/mobius_band/"/>

<meta property="og:url" content="https://george.chemmala.com/stuff/mobius_band/">
  <meta property="og:site_name" content="George Chemmala">
  <meta property="og:title" content="Warping a Image into a Mobius Loop">
  <meta property="og:description" content="A simple python script to warp an image into a Mobius loop">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="stuff">
    <meta property="article:published_time" content="2024-12-30T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-12-30T00:00:00+00:00">
    <meta property="article:tag" content="Python">
    <meta property="article:tag" content="Math">












<link rel="stylesheet" href="/assets/combined.min.9424157b7f7d2714330d5a3a83f300380157604c0537d1a1f6d3c3283519450c.css" media="all">




      <script async src="https://www.googletagmanager.com/gtag/js?id=G-xxxxxxxxx"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-xxxxxxxxx');
        }
      </script>











    




</head>







<body class="auto">

  <div class="content">
    <header>
      

<div class="header">

    

    <h1 class="header-title">
        <a href="https://george.chemmala.com/">George Chemmala</a>
    </h1>

    <div class="header-menu">
        

        
        

        <p
            class="small ">
            <a href="/projects" >
                /projects
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/stuff" >
                /stuff
            </a>
        </p>
        

        <p
            class="small ">
            <a href="/about" >
                /about
            </a>
        </p>
        
        
    </div>

    

</div>

    </header>

    <main class="main">
      




<div class="breadcrumbs"><a href="/">~</a><span class="breadcrumbs-separator">/</span><a href="/stuff/">Stuffs</a><span class="breadcrumbs-separator">/</span>
        <a href="/stuff/mobius_band/">Warping a Image into a Mobius Loop</a></div>


<div >
  <article>
    <header class="single-intro-container">
        
        <h1 class="single-title">Warping a Image into a Mobius Loop</h1>
        <p class="single-summary">A simple python script to warp an image into a Mobius loop</p>
        
        <div class="single-subsummary">
          
          <div>
            
            <p class="single-date">
              <time datetime="2024-12-30T00:00:00&#43;00:00">December 30, 2024</time>
            </p>
          </div>
        </div>
        
    </header>
    
    <div class="single-content">
      <p>Me and the rest of the organizers of <a href="https://sites.google.com/brown.edu/sums">SUMS 2025</a>, a math symposium at Brown where we combine math + another field - in this case music, were working on making a poster for the event.</p>
<p>I had head that Bach did a lot of work with symmetries (relefection, inversion, etc.) in his music and I had even heard that he incorporated a section that was essentially played on a Mobius loop. Since the loop is such a well known visual, I thought it would be fun to make a poster with music warped into a Mobius loop.</p>
<p>I couldn&rsquo;t find any good scripts to do this online, so I quickly bodged together a python script to do this.</p>
<p>The formula for a Mobius loop was pretty easy to come up with on Desmos:</p>
<div align="center">
<iframe src="https://www.desmos.com/3d/gkjg1csncs?embed" width="100%" height="500" frameborder="0"></iframe>
</div>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">mobius</span>(u, v, band_size<span style="color:#f92672">=</span><span style="color:#ae81ff">0.5</span>):
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">s1</span>(u):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> np<span style="color:#f92672">.</span>array([cos(u), sin(u), <span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">def</span> <span style="color:#a6e22e">band</span>(u, v):
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> v <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">0</span>, cos(u), sin(u)]) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>                (<span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> v) <span style="color:#f92672">*</span> np<span style="color:#f92672">.</span>array([<span style="color:#ae81ff">0</span>, <span style="color:#f92672">-</span>cos(u), <span style="color:#f92672">-</span>sin(u)])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> s1((tau <span style="color:#f92672">*</span> u)) <span style="color:#f92672">+</span> 
</span></span><span style="display:flex;"><span>            (band(((tau <span style="color:#f92672">*</span> u) <span style="color:#f92672">+</span> (tau <span style="color:#f92672">/</span> <span style="color:#ae81ff">4</span>)) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, v) <span style="color:#f92672">*</span> band_size)
</span></span></code></pre></div><p>But the rendering was a bit more difficult. Basically, it uses a 3D plot in matplotlib to render the loop and then it for each cell in the grid (or mesh) on the loop, it finds the color of the pixel in the image that corresponds to that cell. The downside is that it takes a while to render for large images but the upside is that you can actually rotate it around in the 3D plot.</p>
<!-- ```python
    def render(self, elev=25, azim=-45, perspective=0.8, zoom=2.2, image_shift=0, res_factor=1, transparent=False, save=True):
        u, v = np.linspace(image_shift, 1 + image_shift, self.image_size[0] // res_factor), np.linspace(0, 1, self.image_size[0] // res_factor)
        u, v = np.meshgrid(u, v)

        coords = np.array([self(u_i, v_j) for u_i, v_j in zip(u.flatten(), v.flatten())])
        x, y, z = coords[:, 0].reshape(u.shape), coords[:, 1].reshape(u.shape), coords[:, 2].reshape(u.shape)

        u_img = (u * (self.image_array.shape[1] - 1)).astype(int)
        v_img = (v * (self.image_array.shape[0] - 1)).astype(int)
        colors = self.image_array[v_img % self.image_array.shape[0], u_img % self.image_array.shape[1]]

        if transparent:
            brightness = np.mean(colors, axis=-1)
            alpha = (brightness * 0.9)
            alpha = np.clip(alpha, 0.2, 1.0)
            colors = np.dstack((colors, alpha))
        else:
            colors = np.clip(colors, 0, 1)

        fig = plt.figure(figsize=(10, 10))
        ax = fig.add_subplot(111, projection='3d')

        mobius_loop = ax.plot_surface(x, y, z, facecolors=colors, rstride=1, cstride=1, antialiased=True, shade=True)

        ax.view_init(elev=elev, azim=azim)

        max_range = np.array([x.max() - x.min(), y.max() - y.min(), z.max() - z.min()]).max()
        mid = lambda coord: (coord.max() + coord.min()) / 2
        mid_x, mid_y, mid_z = mid(x), mid(y), mid(z) 

        scale = perspective / zoom
        ax.set_xlim(mid_x - max_range * scale, mid_x + max_range * scale)
        ax.set_ylim(mid_y - max_range * scale, mid_y + max_range * scale)
        ax.set_zlim(mid_z - max_range * scale, mid_z + max_range * scale)

        ax.axis('off')
        plt.show()

        if save:
            plt.savefig('mobius_strip_render.png', transparent=True, dpi=400)
``` -->
<p>Here&rsquo;s the input image I used, <a href="https://youtu.be/WeWXmNy-Q7E?t=53">BWV 1087</a>:












<figure class="">

    <div class="img-container" style="--w: 16221; --h: 1982;">
        <img loading="lazy" alt="BWV1087" src="/stuff/BWV1087.jpg" width="16221" height="1982">
    </div>

    
</figure>
</p>
<p>and here&rsquo;s the output of the script, which is a 3D plot of the Mobius loop with the image warped around it:












<figure class="">

    <div class="img-container" style="--w: 4000; --h: 4000;">
        <img loading="lazy" alt="BWV1087" src="/stuff/mobius_strip_render.png" width="4000" height="4000">
    </div>

    
</figure>
</p>
<p>and the final poster:












<figure class="">

    <div class="img-container" style="--w: 1100; --h: 1700;">
        <img loading="lazy" alt="SUMS_poster" src="/stuff/sums_poster.png" width="1100" height="1700">
    </div>

    
</figure>
</p>

    </div>
  </article>

  

  

  
  

<div class="single-pagination">
    <hr />

    <div class="flexnowrap">

        <div class="single-pagination-prev">
            
            <div class="single-pagination-container-prev">
                <div class="single-pagination-text">←</div>
                <div class="single-pagination-text">
                    <a href="/stuff/banger_xkcd/">
                        Banger xkcd
                    </a>
                </div>
            </div>
            
        </div>

        <div class="single-pagination-next">
            
        </div>

    </div>

    <hr />
</div>



  

  

  
  <div class="back-to-top">
    <a href="#top">
      back to top
    </a>
  </div>
  

</div>


    </main>
  </div>

  
  





    




  <footer>
    

    
    





    




    
    <p>Powered by
        <a href="https://gohugo.io/">Hugo</a>
        and
        <a href="https://github.com/tomfran/typo">tomfran/typo</a>
    </p>
    
    
    


  </footer>

  
</body>

<script src="/js/theme-switch.js"></script>
<script defer src="/js/copy-code.js"></script>
</html>
